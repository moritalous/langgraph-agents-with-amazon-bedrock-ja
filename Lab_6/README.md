# ラボ 6: エッセイ ライター

このセクションでは、これまで学習したさまざまな概念をまとめたエキサイティングなプロジェクトに着手します。AI を活用したエッセイ ライターを構築します。このプロジェクトでは、Amazon Bedrock と Anthropic の Claude モデルを使用して、より複雑なマルチステップ AI エージェントを作成する方法を説明します。

## 学習内容

1. 複雑なタスク用のマルチエージェント システムを構築する方法

2. LangGraph を使用してステート マシンを実装する

3. 外部調査機能を Tavily API に統合する

4. システム内のさまざまなサブタスクに Amazon Bedrock の Claude を使用する

5. AI Essay Writer と対話するためのシンプルな GUI を構築する

## プロジェクトの概要

Essay Writer は、いくつかの段階を経て機能します:

1. 計画: エッセイのアウトラインを作成する

2. 調査: Tavily を使用して関連情報を収集する

3. 執筆: 計画と調査に基づいてドラフトを作成する

4. 反映: 現在のドラフトを批評する

5. 反復: 批評に基づいてエッセイを修正する

エージェントのフローは、下の図に示されています

![Essay Writer フロー](../assets/lab6_1.png)

このセクションの終わりまでに、さまざまなトピックに関するエッセイを生成、批評、改良できる機能的な AI エッセイ ライターが完成します。このプロジェクトでは、最先端の言語モデルとツールを使用して、実用的なマルチステップ AI アプリケーションを構築する実践的な経験を積むことができます。

さっそく AI エッセイ ライターの構築を始めましょう!

# 結論

このワークショップの終わりには、独自のエージェントを構築する方法について十分な知識が得られるはずです。終了する前に、知っておくべき他のエージェント アーキテクチャについて説明します。

- [マルチエージェント コラボレーション](https://github.com/langchain-ai/langgraph/blob/main/docs/docs/tutorials/multi_agent/multi-agent-collaboration.ipynb):
マルチエージェント アーキテクチャでは、複数のエージェントが共有状態で共同作業を行います。これらのエージェントは、プロンプト、言語モデル、ツールの組み合わせであり、それぞれが機能を提供します。重要な点は、すべてが同じ共有状態に基づいて動作し、受け渡しを行うことで、互いの作業を反復的に構築できることです。

![マルチエージェント アーキテクチャ](../assets/lab6_2.png)

- [スーパーバイザー エージェント](https://github.com/langchain-ai/langgraph/blob/main/docs/docs/tutorials/multi_agent/agent_supervisor.ipynb):
スーパーバイザー エージェント アーキテクチャには、さまざまなサブエージェントの入力と出力を調整および管理する中央スーパーバイザー エージェントが含まれます。スーパーバイザーは、各サブエージェントの特定の入力とタスクを決定します。サブエージェントは、独自の内部状態とプロセスを持つことができます。マルチエージェント アプローチとは異なり、単一の共有状態はなく、スーパーバイザーがサブエージェント間の情報の流れを調整します。

![スーパーバイザー エージェント アーキテクチャ](../assets/lab6_3.png)

- [フロー エンジニアリング](https://arxiv.org/abs/2401.08500):
AlphaCode の論文で説明されているように、フロー エンジニアリングとは、重要なポイントで反復ループによって区切られた、方向性のある情報の流れを持つアーキテクチャを設計することを指します。このアプローチは、コーディングなどの特定の問題領域に合わせて調整された、線形パイプラインと周期的な反復を組み合わせます。目標は、手元のタスクに最適な情報の流れと意思決定を設計することです。

![フロー エンジニアリング アーキテクチャ](../assets/lab6_4.png)

- [計画と実行](https://github.com/langchain-ai/langgraph/blob/main/docs/docs/tutorials/plan-and-execute/plan-and-execute.ipynb):
計画と実行のパラダイムには、明示的な計画フェーズとそれに続く実行フェーズが含まれます。まず、計画または一連のステップが生成され、サブエージェントがそれを順番に実行します。各ステップの後に、結果に基づいて計画が更新または修正される可能性があり、計画が完了するか再計画が必要になるまでプロセスが継続されます。

![計画と実行のアーキテクチャ](../assets/lab6_5.png)

- [言語エージェントのツリー検索](https://github.com/langchain-ai/langgraph/blob/main/docs/docs/tutorials/lats/lats.ipynb):
このアプローチでは、可能なアクション状態に対してツリー検索を実行し、アクションを生成し、それらを反映し、情報をバックプロパゲートして親ノードを更新します。ツリー内の以前の状態に戻ることができるため、エージェントは以前の反映と更新からの情報を活用しながら、さまざまなアクション パスを探索できます。

![言語エージェントのツリー検索アーキテクチャ](../assets/lab6_6.png)